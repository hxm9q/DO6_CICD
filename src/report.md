## Part 1. Настройка gitlab-runner
**== Выполнение ==**

#### Подними виртуальную машину Ubuntu Server 22.04 LTS.

![part1](images/part1.1.png)

#### Скачай и установи на виртуальную машину gitlab-runner.

![part1](images/part1.2.png)

#### Запусти gitlab-runner и зарегистрируй его для использования в текущем проекте (DO6_CICD).

![part1](images/part1.3.png)

## Part 2. Сборка
**== Выполнение ==**

### Напиши этап для CI по сборке приложений из проекта C2_SimpleBashUtils.
#### В файле gitlab-ci.yml добавь этап запуска сборки через мейк файл из проекта C2.

![part2](images/part2.1.png)

1) Сначала с помощью команды `echo` выводим сообщение о начале сборки
2) Затем переходим в директории с исходным кодом cat и grep соответственно
3) Далее собираем цели s21_cat и s21_grep с помощью make
4) В конце определяем артефакты, которые должны быть сохранены после завершения задачи на 30 дней

> Артефакты - это файлы или папки, которые будут доступны для скачивания или использования в следующих этапах пайплайна.
> В нашем случае артефакты - исполняемые файлы для cat и grep

#### После запушу все изменения в gitlab и перейду в раздел CI/CD
#### Видим, что пайплайн запускается и все в порядке

![part2](images/part2.2.png)
![part2](images/part2.3.png)

#### Файлы, полученные после сборки (артефакты), сохрани в произвольную директорию со сроком хранения 30 дней.
#### Артефакты доступны для загрузки, а срок 30 дней указан в конфиге

![part2](images/part2.4.png)

## Part 3. Тест кодстайла
**== Выполнение ==**

### Напиши этап для CI, который запускает скрипт кодстайла (clang-format).
#### Если кодстайл не прошел, то «зафейли» пайплайн.
#### В пайплайне отобрази вывод утилиты clang-format.

![part3](images/part3.1.png)

1) Добавил новый stage `code_style`
2) Переходим в директории с исходным кодом cat и grep соответственно
3) Форматируем .c и .h файлы
4) `git diff --exit-code` нужен для фейла пайплайна в случае, если кодстайл не прошел


#### Видим, что пайплайн запускается и все в порядке

![part3](images/part3.2.png)
![part3](images/part3.3.png)

#### Теперь изменю файл s21_cat.c так, чтобы он не прошел кодстайл
#### Пайплайн кодстайла фейлится:

![part3](images/part3.4.png)
![part3](images/part3.5.png)

## Part 4. Интеграционные тесты
**== Выполнение ==**

### Напиши этап для CI, который запускает твои интеграционные тесты из того же проекта.
#### Запусти этот этап автоматически только при условии, если сборка и тест кодстайла прошли успешно.
#### Если тесты не прошли, то «зафейли» пайплайн.
#### В пайплайне отобрази вывод, что интеграционные тесты успешно прошли / провалились.

#### Добавлю в файл конфигурации этот код:

![part4](images/part4.1.png)

#### Видим, что пайплайн запускается и все в порядке

![part4](images/part4.2.png)

#### Теперь изменю файл s21_cat.c так, чтобы он не прошел кодстайл
#### Пайплайн кодстайла фейлится, соответственно тесты даже не запускаются:

![part4](images/part4.3.png)

#### Добавлю в файл конфигурации код, который будет отображать результат тестов и фейлить пайплайн в случае неудачи

![part4](images/part4.4.png)
![part4](images/part4.5.png)

## Part 5. Этап деплоя
**== Выполнение ==**

#### Подними вторую виртуальную машину Ubuntu Server 22.04 LTS.

![part5](images/part5.1.png)

### Напиши этап для CD, который «разворачивает» проект на другой виртуальной машине.
#### Запусти этот этап вручную при условии, что все предыдущие этапы прошли успешно.
#### Напиши bash-скрипт, который при помощи ssh и scp копирует файлы, полученные после сборки (артефакты), в директорию /usr/local/bin второй виртуальной машины.

#### Настрою ssh подключение по внутренней сети:

![part5](images/part5.2.png)
![part5](images/part5.3.png)
![part5](images/part5.4.png)

#### В файле gitlab-ci.yml добавь этап запуска написанного скрипта.
#### В случае ошибки «зафейли» пайплайн.

![part5](images/part5.5.png)
![part5](images/part5.6.png)
![part5](images/part5.7.png)

## Part 6. Дополнительно. Уведомления
**== Выполнение ==**

## Настрой уведомления об успешном/неуспешном выполнении пайплайна через бота с именем «[твой nickname] DO6 CI/CD» в Telegram.

#### Текст уведомления должен содержать информацию об успешности прохождения как этапа CI, так и этапа CD.
#### В остальном текст уведомления может быть произвольным.

> Я создал своего бота через @BotFather и добавил его в свой чат
> Затем создал скрипт telega.sh в папке src и добавил build для телеги в конфиг

![part6](images/part6.1.png)
![part6](images/part6.2.png)
![part6](images/part6.3.png)